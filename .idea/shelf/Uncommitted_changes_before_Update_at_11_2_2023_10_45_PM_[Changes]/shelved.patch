Index: webpage/views.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from django.shortcuts import render, redirect\r\nfrom django.contrib.auth import authenticate, login\r\nfrom django.contrib import messages\r\nfrom django.http import HttpResponse, HttpResponseRedirect\r\nfrom .models import PantryItem\r\nfrom .forms import LoginForm, AllergyDietForm, RecipeInformationForm, IngredientListForm\r\nfrom django.urls import reverse\r\n\r\n\r\ndef login_view(request):\r\n    form = LoginForm(request.POST)\r\n\r\n    if request.method == 'POST':\r\n        if form.is_valid():\r\n            cd = form.cleaned_data\r\n            user = authenticate(request, username=cd['username'], password=cd['password'])\r\n            if user is not None:\r\n                if user.is_active:\r\n                    login(request, user)\r\n                    return redirect(reverse('home'))\r\n                else:\r\n                    return HttpResponse('Disabled account')\r\n            else:\r\n                messages.error(request, 'Invalid login')\r\n        else:\r\n            messages.error(request, 'Form data is not valid')\r\n\r\n        # Pass the form to the context for both GET and POST requests\r\n    return render(request, 'login.html', {'form': form})\r\n\r\n\r\ndef home(request):\r\n    news_feed = [\r\n        \"News Item 1\",\r\n        \"News Item 2\",\r\n        \"News Item 3\",\r\n        # Add more news items as needed\r\n    ]\r\n\r\n    return render(request, 'home.html', {'news_feed': news_feed})\r\n\r\n\r\ndef create_recipe(request):\r\n    allergy_diet_form = AllergyDietForm()\r\n    recipe_info_form = RecipeInformationForm()\r\n    ingredient_list_form = IngredientListForm()\r\n\r\n    context = {\r\n        'allergy_diet_form': allergy_diet_form,\r\n        'recipe_info_form': recipe_info_form,\r\n        'ingredient_list_form': ingredient_list_form,\r\n    }\r\n    return render(request, 'create_recipe.html')\r\n\r\n\r\ndef pantry(request):\r\n    pantry_items = PantryItem.objects.all()\r\n    context = {'pantry_items': pantry_items}\r\n    return render(request, 'pantry.html')\r\n\r\n\r\ndef forgot_password(request):\r\n    return render(request, 'forgot_password.html')\r\n\r\n\r\ndef my_recipes(request):\r\n    return render(request, 'my_recipes.html')\r\n\r\n\r\n# Adds item to pantry\r\ndef add_item(request):\r\n    if request.method == 'POST' and request.user.is_authenticated:\r\n        item_name = request.POST.get('item_name')\r\n        item_amount = request.POST.get('item_amount')\r\n\r\n        if item_name and item_amount:\r\n            pantry_item = PantryItem(user=request.user, item_name=item_name, item_amount=item_amount)\r\n            pantry_item.save()\r\n\r\n    return HttpResponseRedirect('/pantry')\r\n\r\n\r\n# Clears the pantry\r\ndef clear_pantry(request):\r\n    if request.user.is_authenticated:\r\n        PantryItem.objects.filter(user=request.user).delete()\r\n    return HttpResponseRedirect('/pantry')\r\n\r\n\r\n\r\ndef cart(request):\r\n    return render(request, 'cart.html')\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/webpage/views.py b/webpage/views.py
--- a/webpage/views.py	(revision 36fb40ca01babee431194565623ddc981f732781)
+++ b/webpage/views.py	(date 1698982851068)
@@ -87,6 +87,5 @@
     return HttpResponseRedirect('/pantry')
 
 
-
 def cart(request):
     return render(request, 'cart.html')
